#include <stdio.h>

int main() {
    char arr[5][5];
    arr[0][0] = 'P';
    for (int i = 0; i < 5; i++) {
        for (int j = 0; j < 5; j++) {
            if (i == 0 && j == 0) continue;
            printf("Enter element for index %d %d (I, X, or space): ", i, j);
            // Read the input and clear the buffer after each entry
            arr[i][j] = getchar();
            while (getchar() != '\n');  // Flush the input buffer

            // Ensure the input is valid (either 'I', 'X', or ' ')
            while (arr[i][j] != 'I' && arr[i][j] != 'X' && arr[i][j] != ' ') {
                printf("Invalid input! Please enter I, X, or space for index %d %d: ", i, j);
                arr[i][j] = getchar();
                while (getchar() != '\n');  // Flush the buffer again
            }
        }
    }

    int i = 0, j = 0; // Initial position of 'P'
    int score = 0;
    printf("{\n");
    for (i = 0; i < 5; i++) {
        for (j = 0; j < 5; j++) {
            printf("'%c',", arr[i][j]);
        }
        printf("\n");
    }
    printf("}\n");

    printf("Please use WASD for movement:\n");
    char in;
    scanf(" %c", &in);  // Use " %c" to ignore any leading whitespace
    for (int m = 0; m < 9999; m++) {
        if (i == 0 && in == 'w') {
            scanf(" %c", &in);  // Use " %c" again for the next input
        } else if (j == 0 && in == 'a') {
            scanf(" %c", &in);
        } else if (j == 4 && in == 'd') {
            scanf(" %c", &in);
        } else if (i == 4 && in == 's') {
            scanf(" %c", &in);
        } else {
            if (in == 'w') {
                arr[i][j] = ' ';
                i--;
                if (arr[i][j] == 'I') score++;
                else if (arr[i][j] == 'X') score--;
                arr[i][j] = 'P';
            } else if (in == 'a') {
                arr[i][j] = ' ';
                j--;
                if (arr[i][j] == 'I') score++;
                else if (arr[i][j] == 'X') score--;
                arr[i][j] = 'P';
            } else if (in == 's') {
                arr[i][j] = ' ';
                i++;
                if (arr[i][j] == 'I') score++;
                else if (arr[i][j] == 'X') score--;
                arr[i][j] = 'P';
            } else if (in == 'd') {
                arr[i][j] = ' ';
                j++;
                if (arr[i][j] == 'I') score++;
                else if (arr[i][j] == 'X') score--;
                arr[i][j] = 'P';
            }

            for (i = 0; i < 5; i++) {
                for (j = 0; j < 5; j++) {
                    printf("'%c',", arr[i][j]);
                }
                printf("\n");
            }
        }
        printf("Score: %d\n");
        printf("Do you want to quit? (1 for Yes, 0 for No): ");
        int q;
        scanf("%d", &q);
        if (q == 1) continue;
        else if (q == 0) {
            printf("Game ended. Final Score: %d\n", score);
            break;
        }
    }

    return 0;
}

